<Window x:Class="DesignSheet.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="clr-namespace:DesignSheet.Views"
        Title="Workshop Tracker"
        Height="720"
        Width="1200"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Toolbar -->
            <RowDefinition Height="*"/>
            <!-- Content -->
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <ToolBarTray Grid.Row="0">
            <ToolBar>
                <Button Content="Reload"
                        Margin="2,0"
                        Command="{Binding ReloadAllCommand}" />

                <Button Content="Save backup"
                        Margin="2,0"
                        Command="{Binding SaveBackupCommand}" />

                <Separator/>

                <Button Content="Change password"
                        Margin="2,0"
                        Command="{Binding ChangePasswordCommand}" />

                <Separator/>

                <TextBlock Text="Search:"
                           VerticalAlignment="Center"
                           Margin="8,0,4,0" />
                <TextBox Width="220"
                         Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" />
            </ToolBar>
        </ToolBarTray>

        <!-- Main content: open / closed tabs -->
        <TabControl Grid.Row="1"
                    Margin="4"
                    SelectedIndex="{Binding SelectedTabIndex}">
            <!-- Open works tab -->
            <TabItem Header="Open works">
                <!-- WorksGrid's DataContext is the OpenRowsView (ICollectionView) -->
                <views:WorksGrid DataContext="{Binding OpenRowsView}" />
            </TabItem>

            <!-- Closed works tab -->
            <TabItem Header="Closed works">
                <views:WorksGrid DataContext="{Binding ClosedRowsView}" />
            </TabItem>
        </TabControl>
    </Grid>
</Window>
